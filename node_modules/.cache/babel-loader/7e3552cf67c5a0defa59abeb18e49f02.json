{"ast":null,"code":"var _jsxFileName = \"/Users/gereniz/Projects/btkakademi/btkakademireact/reactcourse/northwind-redux/src/components/products/AddOrUpdateProduct.js\";\nimport React, { useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport { getCategories } from \"../../redux/actions/categoryActions\";\nimport { saveProduct } from \"../../redux/actions/productActions\";\nimport ProductDetail from \"./ProductDetail\";\n\nfunction AddOrUpdateProduct({\n  products,\n  categories,\n  getProducts,\n  getCategories,\n  saveProduct,\n  history,\n  ...props\n}) {\n  const [product, setProduct] = useState({ ...props.product\n  });\n  const [errors, setErrors] = useState({});\n  useEffect(() => {\n    if (categories.length === 0) {\n      getCategories();\n    }\n\n    setProduct({ ...props.product\n    });\n  }, [props.product]);\n\n  function handleChange(event) {\n    const {\n      name,\n      value\n    } = event.target;\n    setProduct(previousProduct => ({ ...previousProduct,\n      [name]: name === \"categoryID\" ? parseInt(value, 10) : value\n    }));\n    validate(name, value);\n  }\n\n  function validate(name, value) {\n    if (name === \"name\" && value === \"\") {\n      setErrors(previousErrors => ({ ...previousErrors,\n        name: \"Not Product Name\"\n      }));\n    } else {\n      setErrors(previousErrors => ({ ...previousErrors,\n        name: \"\"\n      }));\n    }\n  }\n\n  function handleSave(event) {\n    event.preventDefault();\n    saveProduct(product).then(() => {\n      history.push(\"/\");\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(ProductDetail, {\n    product: product,\n    categories: categories,\n    onChange: handleChange,\n    onSave: handleSave,\n    errors: errors,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 5\n    }\n  });\n}\n\nexport function getProductByID(products, id) {\n  let product = products.find(product => product.id == id) || null;\n  return product;\n}\n\nfunction mapStateToProps(state, ownProps) {\n  const id = ownProps.match.params.id;\n  const product = id && state.productListReducer.length > 0 ? getProductByID(state.productListReducer, id) : {};\n  return {\n    product,\n    products: state.productListReducer,\n    categories: state.categoryListReducer\n  };\n}\n\nconst mapDispatchToProps = {\n  getCategories,\n  saveProduct\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(AddOrUpdateProduct);","map":{"version":3,"sources":["/Users/gereniz/Projects/btkakademi/btkakademireact/reactcourse/northwind-redux/src/components/products/AddOrUpdateProduct.js"],"names":["React","useEffect","useState","connect","getCategories","saveProduct","ProductDetail","AddOrUpdateProduct","products","categories","getProducts","history","props","product","setProduct","errors","setErrors","length","handleChange","event","name","value","target","previousProduct","parseInt","validate","previousErrors","handleSave","preventDefault","then","push","getProductByID","id","find","mapStateToProps","state","ownProps","match","params","productListReducer","categoryListReducer","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport { getCategories } from \"../../redux/actions/categoryActions\";\nimport { saveProduct } from \"../../redux/actions/productActions\";\nimport ProductDetail from \"./ProductDetail\";\n\nfunction AddOrUpdateProduct({\n  products,\n  categories,\n  getProducts,\n  getCategories,\n  saveProduct,\n  history,\n  ...props\n}) {\n  const [product, setProduct] = useState({ ...props.product });\n  const [errors,setErrors] = useState({});\n  useEffect(() => {\n    if (categories.length === 0) {\n      getCategories();\n    }\n    setProduct({ ...props.product });\n  }, [props.product]);\n\n  function handleChange(event) {\n    const { name, value } = event.target;\n    setProduct((previousProduct) => ({\n      ...previousProduct,\n      [name]: name === \"categoryID\" ? parseInt(value, 10) : value,\n    }));\n    validate(name,value);\n    }\n    \n    function validate(name,value){\n      if(name===\"name\" && value === \"\"){\n        setErrors((previousErrors => ({\n          ...previousErrors,name:\"Not Product Name\"  \n        })));\n      }else{\n        setErrors(previousErrors =>({\n          ...previousErrors,\n          name : \"\"\n        }));\n      }\n    }\n  \n\n  function handleSave(event) {\n    event.preventDefault();\n    saveProduct(product).then(() => {\n      history.push(\"/\");\n    });\n  }\n\n  return (\n    <ProductDetail\n      product={product}\n      categories={categories}\n      onChange={handleChange}\n      onSave={handleSave}\n      errors= {errors}\n    />\n  );\n}\n\nexport function getProductByID(products, id) {\n  let product =\n    products.find((product) => product.id == id) || null;\n  return product;\n}\n\nfunction mapStateToProps(state, ownProps) {\n  const id = ownProps.match.params.id ;\n  const product =\n    id && state.productListReducer.length > 0\n      ? getProductByID(state.productListReducer, id)\n      : {};\n  return {\n    product,\n    products: state.productListReducer,\n    categories: state.categoryListReducer,\n  };\n}\nconst mapDispatchToProps = {\n  getCategories,\n  saveProduct,\n};\n\nexport default connect(mapStateToProps,mapDispatchToProps)(AddOrUpdateProduct);\n"]},"metadata":{},"sourceType":"module"}